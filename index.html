<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>आभूषण गिरवी - डिजिटल रिकॉर्ड</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
    <h1>आभूषण गिरवी - डिजिटल रिकॉर्ड</h1>

    <div class="tab">
      <button class="tablinks active" onclick="openTab(event, 'Issuance')">नया ऋण जारी करें</button>
      <button class="tablinks" onclick="openTab(event, 'Return')">ऋण बंद करें / वापसी</button>
    </div>

    <div id="Issuance" class="tabcontent">
        <h2>नया गिरवी रिकॉर्ड</h2>
        <form id="loanIssuanceForm">

            <fieldset>
                <legend>ग्राहक विवरण</legend>
                <label for="name">नाम:</label>
                <input type="text" id="name" name="name" required>

                <label for="mobile">मोबाइल नंबर (Loan ID):</label>
                <input type="tel" id="mobile" name="mobile" required>

                <label for="aadharId">आधार/पहचान संख्या:</label>
                <input type="text" id="aadharId" name="aadharId" required>
                
                <label for="address">वर्तमान पता:</label>
                <textarea id="address" name="address" rows="3" required></textarea>
            </fieldset>

            <fieldset>
                <legend>गिरवी आभूषण और ऋण विवरण</legend>
                <label for="goldWeight">सोने का वजन (ग्राम):</label>
                <input type="number" id="goldWeight" name="goldWeight" step="0.01" required>

                <label for="jewelryDesc">विवरण (चेन, चूड़ी आदि):</label>
                <textarea id="jewelryDesc" name="jewelryDesc" rows="2" required></textarea>
                
                <label for="loanAmount">ऋण राशि (₹):</label>
                <input type="number" id="loanAmount" name="loanAmount" required>

                <label for="interestRate">ब्याज दर (% प्रति माह):</label>
                <input type="number" id="interestRate" name="interestRate" step="0.1" required>

                <label for="loanDuration">ऋण अवधि (महीने):</label>
                <input type="number" id="loanDuration" name="loanDuration" required>
                
                <p>समझौते की तारीख: <span id="agreementDate"></span></p>
            </fieldset>
            
            <fieldset>
                <legend>फोटो और हस्ताक्षर</legend>
                <p style="color: #007bff; font-weight: bold;">✅ फ़ोटो अब Google Drive में सेव होंगी।</p>

                <label for="aadharPhoto">1. आधार कार्ड की फोटो:</label>
                <input type="file" id="aadharPhoto" name="aadharPhoto" accept="image/*" capture="environment" required>
                
                <label for="jewelryPhoto">2. गिरवी आभूषण की फोटो:</label>
                <input type="file" id="jewelryPhoto" name="jewelryPhoto" accept="image/*" capture="environment" required>
                
                <p><strong>ग्राहक का डिजिटल हस्ताक्षर (सेव होगा):</strong></p>
                <canvas id="signatureCanvas" width="300" height="100"></canvas>
                <button type="button" class="btn btn-clear" onclick="clearSignature('signatureCanvas')">हस्ताक्षर साफ करें</button>
                
                <label style="margin-top: 15px;">
                    <input type="checkbox" id="termsAccepted" required>
                    मैं सभी **गैर-व्यावसायिक** शर्तों को स्वीकार करता हूँ।
                </label>
            </fieldset>

            <button type="submit" class="btn btn-primary">ऋण जारी करें और डेटा सेव करें</button>

        </form>
    </div>

    <div id="Return" class="tabcontent hidden">
        <h2>ऋण बंद करें</h2>
        <fieldset>
            <legend>रिकॉर्ड सर्च करें</legend>
            <label for="searchId">ग्राहक ID / मोबाइल नंबर डालें:</label>
            <input type="text" id="searchId" name="searchId_return" placeholder="रिकॉर्ड खोजने के लिए मोबाइल नंबर (Loan ID)" required>
            <button type="button" class="btn" onclick="searchLoanRecord()">रिकॉर्ड खोजें (Dummy)</button>
        </fieldset>

        <div id="loanDetailsDisplay" class="hidden">
            <h3 style="color: #009688;">रिकॉर्ड मिला! (नाम: <span id="customerNameDisplay"></span>)</h3>
            <p><strong>ऋण ID (मोबाइल):</strong> <span id="loanIDDisplay"></span></p>
            <p><strong>ऋण राशि:</strong> ₹<span id="loanAmountDisplay"></span></p>
            <p><strong>आभूषण:</strong> <span id="jewelryDescDisplay_Return"></span></p>
            
            <form id="loanClosureForm">
                <fieldset>
                    <legend>सामान वापसी और अभिस्वीकृति</legend>
                    <label for="closeDate">समापन की तारीख:</label>
                    <input type="text" id="closeDate" readonly>

                    <label for="totalPaidAmount">चुकाई गई कुल राशि (मूलधन + ब्याज):</label>
                    <input type="number" id="totalPaidAmount" name="totalPaidAmount" required>

                    <label for="returnNote">गिरवीधारी का नोट:</label>
                    <textarea id="returnNote" name="returnNote" rows="3" required placeholder="जैसे: 'सामान का चुकता किया गया, ग्राहक को संतुष्टि के साथ वापस कर दिया गया।'"></textarea>
                    
                    <p><strong>ग्राहक का वापसी हस्ताक्षर (सेव होगा):</strong></p>
                    <canvas id="returnSignatureCanvas" width="300" height="100"></canvas>
                    <button type="button" class="btn btn-clear" onclick="clearSignature('returnSignatureCanvas')">हस्ताक्षर साफ करें</button>
                    
                    <button type="submit" class="btn btn-primary">ऋण बंद करें और डेटा सेव करें</button>
                </fieldset>
            </form>
        </div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
