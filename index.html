<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>आभूषण गिरवी - डिजिटल रिकॉर्ड</title>
<style>
body { font-family: Arial; margin:20px; background:#f4f4f9; color:#333; }
.container { max-width:800px; margin:auto; background:#fff; padding:20px; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,0.1);}
h1{text-align:center;color:#0056b3;}
input, textarea { width:100%; padding:8px; margin:5px 0; box-sizing:border-box;}
input[type=file] { padding:5px; border:1px dashed #aaa; }
canvas { border:1px solid #333; cursor:crosshair; display:block; margin-top:5px;}
.btn { padding:8px 12px; margin-top:10px; border:none; border-radius:5px; cursor:pointer; background:#007bff;color:white;}
.btn-clear{background:#f0ad4e;margin-left:10px;}
</style>
</head>
<body>

<div class="container">
<h1>आभूषण गिरवी - डिजिटल रिकॉर्ड</h1>

<form id="loanForm">

<h3>ग्राहक विवरण</h3>
<label>नाम:</label>
<input type="text" name="name" required>
<label>मोबाइल (Loan ID):</label>
<input type="tel" name="mobile" required>
<label>आधार/पहचान:</label>
<input type="text" name="aadharId" required>
<label>पता:</label>
<textarea name="address" rows="2" required></textarea>

<h3>गिरवी और ऋण विवरण</h3>
<label>सोने का वजन (ग्राम):</label>
<input type="number" name="goldWeight" step="0.01" required>
<label>विवरण:</label>
<textarea name="jewelryDesc" rows="2" required></textarea>
<label>ऋण राशि (₹):</label>
<input type="number" name="loanAmount" required>
<label>ब्याज दर (% प्रति माह):</label>
<input type="number" name="interestRate" step="0.1" required>
<label>ऋण अवधि (महीने):</label>
<input type="number" name="loanDuration" required>

<h3>Photos और हस्ताक्षर</h3>
<label>ग्राहक फोटो:</label>
<input type="file" name="customerPhoto" accept="image/*" capture="environment" required>
<label>आधार फोटो:</label>
<input type="file" name="aadharPhoto" accept="image/*" capture="environment" required>
<label>आभूषण फोटो:</label>
<input type="file" name="jewelryPhoto" accept="image/*" capture="environment" required>

<label>हस्ताक्षर:</label>
<canvas id="signatureCanvas" width="300" height="100"></canvas>
<button type="button" class="btn btn-clear" onclick="clearSignature()">साफ करें</button>

<label>
<input type="checkbox" required> मैं सभी शर्तों को स्वीकार करता हूँ।
</label>

<button type="submit" class="btn">डेटा सेव करें</button>
</form>
</div>

<script>
const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbz-klvOq3SLMnqPgKxBRfix3-8qP3ropHe0oQnCa7ggNHvuLqhPC5vWlb72XpcGPhFeLw/exec'; // ← यहाँ अपना Web App URL डालो

// Signature pad setup
const canvas = document.getElementById('signatureCanvas');
const ctx = canvas.getContext('2d');
let isDrawing = false;

canvas.addEventListener('mousedown', e=>{isDrawing=true;ctx.beginPath();ctx.moveTo(e.offsetX,e.offsetY);});
canvas.addEventListener('mousemove', e=>{if(isDrawing){ctx.lineTo(e.offsetX,e.offsetY);ctx.stroke();}});
canvas.addEventListener('mouseup', e=>{isDrawing=false;ctx.closePath();});
canvas.addEventListener('mouseout', e=>{isDrawing=false;});

function clearSignature(){ctx.clearRect(0,0,canvas.width,canvas.height);}

// Form submit
document.getElementById('loanForm').addEventListener('submit', function(e){
    e.preventDefault();
    const form = e.target;
    const formData = new FormData(form);
formData.append('sheet', 'Issuance_Data');
formData.append('signatureData', document.getElementById('signatureCanvas').toDataURL('image/png'));


    fetch(APPS_SCRIPT_URL,{
        method:'POST',
        body: formData
    })
    .then(res=>res.json())
    .then(res=>{
        if(res.success){alert('✅ डेटा सेव हो गया'); form.reset(); clearSignature();}
        else{alert('❌ डेटा सेव में error: '+res.message);}
    })
    .catch(err=>{alert('❌ नेटवर्क error'); console.error(err);});
});
</script>

</body>
</html>
